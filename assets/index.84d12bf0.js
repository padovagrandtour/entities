(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerpolicy&&(s.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?s.credentials="include":l.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(l){if(l.ep)return;l.ep=!0;const s=n(l);fetch(l.href,s)}})();function $(){}function de(t){return t()}function ie(){return Object.create(null)}function R(t){t.forEach(de)}function pe(t){return typeof t=="function"}function Y(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let j;function V(t,e){return j||(j=document.createElement("a")),j.href=e,t===j.href}function we(t){return Object.keys(t).length===0}function ye(t,...e){if(t==null)return $;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function ve(t,e,n){t.$$.on_destroy.push(ye(e,n))}function v(t,e){t.appendChild(e)}function g(t,e,n){t.insertBefore(e,n||null)}function m(t){t.parentNode.removeChild(t)}function $e(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function ke(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function M(t){return document.createTextNode(t)}function k(){return M(" ")}function X(){return M("")}function qe(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function xe(t){return Array.from(t.childNodes)}function ee(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function N(t,e,n,o){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}class Ce{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,o=null){this.e||(this.is_svg?this.e=ke(n.nodeName):this.e=w(n.nodeName),this.t=n,this.c(e)),this.i(o)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)g(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(m)}}let te;function H(t){te=t}const O=[],ce=[],G=[],ue=[],Ee=Promise.resolve();let Q=!1;function Le(){Q||(Q=!0,Ee.then(he))}function Z(t){G.push(t)}const U=new Set;let A=0;function he(){const t=te;do{for(;A<O.length;){const e=O[A];A++,H(e),Pe(e.$$)}for(H(null),O.length=0,A=0;ce.length;)ce.pop()();for(let e=0;e<G.length;e+=1){const n=G[e];U.has(n)||(U.add(n),n())}G.length=0}while(O.length);for(;ue.length;)ue.pop()();Q=!1,U.clear(),H(t)}function Pe(t){if(t.fragment!==null){t.update(),R(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Z)}}const D=new Set;let I;function ne(){I={r:0,c:[],p:I}}function oe(){I.r||R(I.c),I=I.p}function x(t,e){t&&t.i&&(D.delete(t),t.i(e))}function L(t,e,n,o){if(t&&t.o){if(D.has(t))return;D.add(t),I.c.push(()=>{D.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}function z(t){t&&t.c()}function B(t,e,n,o){const{fragment:l,after_update:s}=t.$$;l&&l.m(e,n),o||Z(()=>{const r=t.$$.on_mount.map(de).filter(pe);t.$$.on_destroy?t.$$.on_destroy.push(...r):R(r),t.$$.on_mount=[]}),s.forEach(Z)}function W(t,e){const n=t.$$;n.fragment!==null&&(R(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Te(t,e){t.$$.dirty[0]===-1&&(O.push(t),Le(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function me(t,e,n,o,l,s,r,c=[-1]){const i=te;H(t);const u=t.$$={fragment:null,ctx:[],props:s,update:$,not_equal:l,bound:ie(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:ie(),dirty:c,skip_bound:!1,root:e.target||i.$$.root};r&&r(u.root);let p=!1;if(u.ctx=n?n(t,e.props||{},(a,d,...f)=>{const h=f.length?f[0]:d;return u.ctx&&l(u.ctx[a],u.ctx[a]=h)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](h),p&&Te(t,a)),d}):[],u.update(),p=!0,R(u.before_update),u.fragment=o?o(u.ctx):!1,e.target){if(e.hydrate){const a=xe(e.target);u.fragment&&u.fragment.l(a),a.forEach(m)}else u.fragment&&u.fragment.c();e.intro&&x(t.$$.fragment),B(t,e.target,e.anchor,e.customElement),he()}H(i)}class _e{$destroy(){W(this,1),this.$destroy=$}$on(e,n){if(!pe(n))return $;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const l=o.indexOf(n);l!==-1&&o.splice(l,1)}}$set(e){this.$$set&&!we(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Me="/entities/assets/logo.b79cad42.webp",Ie="/entities/assets/ontologyVisual.7d433ba1.webp",S=[];function Se(t,e=$){let n;const o=new Set;function l(c){if(Y(t,c)&&(t=c,n)){const i=!S.length;for(const u of o)u[1](),S.push(u,t);if(i){for(let u=0;u<S.length;u+=2)S[u][0](S[u+1]);S.length=0}}}function s(c){l(c(t))}function r(c,i=$){const u=[c,i];return o.add(u),o.size===1&&(n=e(l)||$),c(t),()=>{o.delete(u),o.size===0&&(n(),n=null)}}return{set:l,update:s,subscribe:r}}const{HashMapDataset:Ne,Graph:Oe,PlanBuilder:He}=window.sparqlEngine;let Fe=fetch("./hdt-wasm/padovagrandtour.hdt").then(t=>t.arrayBuffer()).then(t=>{const e=new Uint8Array(t);Module.FS_createDataFile("/","file.hdt",e,!0,!0,!0),Module.ccall("loadHDT",null,[],null)});const Re=(t,e)=>new Promise((n,o)=>{Fe.then(()=>{const l=d=>d.startsWith("?")?"":d;class s extends Oe{constructor(){super()}find(f){const{subject:h,predicate:C,object:_}=f;return console.log(h,C,_),window.queryMatches=[],console.log("running"),window.Module.ccall("search",null,["string","string","string"],[l(h),l(C),l(_)]),console.log("runningEnded"),window.queryMatches}}const r=new s,c=new Ne("https://padovagrandtour.github.io/entities#",r),i=t,p=new He(c).build(i),a=[];p.subscribe(d=>{const f=d.toObject();console.log(e),a.push(e.map(h=>f["?"+h]))},d=>{console.error("error",d)},()=>{n(a)})})}),re=localStorage["padovagrandtour-hdtmode"]==="true",le=`
PREFIX owl: <http://www.w3.org/2002/07/owl#> 
PREFIX pgt: <https://padovagrandtour.github.io/entities#> 
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> 
PREFIX xml: <http://www.w3.org/XML/1998/namespace> 
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#> 
PREFIX sdo: <https://schema.org/>
PREFIX geo: <http://www.w3.org/2003/01/geo/wgs84_pos#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> 

`,se={};le.split(`
`).filter(t=>t.includes("PREFIX")).map(t=>t.replace("PREFIX","").trim()).forEach(t=>{const[e,...n]=t.split(":");se[e.trim()]=n.join(":").trim().replace("<","").replace(">","")});const P=t=>{for(let[e,n]of Object.entries(se))t=t.replace(n,e+":");return t};console.log(se);const Xe=(t,e)=>new Promise((n,o)=>{const l=[];new window.Comunica.QueryEngine().queryBindings(le+t,{sources:[{type:"sparql",value:"http://localhost:7210/repositories/pgt"}]}).then(function(s){s.on("data",function(r){l.push(e.map(c=>r.get(c)?r.get(c).value:null))}),s.on("end",function(){n(l)}),s.on("error",r=>{o(r)})}).catch((...s)=>o(...s))});addEventListener("hashchange",t=>{window.location.reload()});const T=window.location.hash.replace("#",""),je=re?Re:Xe,ge=Se(null),be=async()=>{try{ge.set(await je(`
      ${le}

          SELECT * {
            pgt:${window.location.hash.substring(1)} ?p ?o
          } LIMIT 1000
        `,["p","o"]))}catch(t){console.log("Failure connection",t),await new Promise(e=>setTimeout(e,1e3)),be()}};T&&be();function Ae(t){let e=P(t[1])+"",n;return{c(){n=M(e)},m(o,l){g(o,n,l)},p(o,l){l&2&&e!==(e=P(o[1])+"")&&ee(n,e)},d(o){o&&m(n)}}}function Ge(t){let e,n;return{c(){e=new Ce(!1),n=X(),e.a=n},m(o,l){e.m(t[1],o,l),g(o,n,l)},p(o,l){l&2&&e.p(o[1])},d(o){o&&m(n),o&&e.d()}}}function De(t){let e,n;function o(r,c){return c&2&&(e=null),e==null&&(e=!!r[2](r[1])),e?We:Be}let l=o(t,-1),s=l(t);return{c(){s.c(),n=X()},m(r,c){s.m(r,c),g(r,n,c)},p(r,c){l===(l=o(r,c))&&s?s.p(r,c):(s.d(1),s=l(r),s&&(s.c(),s.m(n.parentNode,n)))},d(r){s.d(r),r&&m(n)}}}function Be(t){let e,n=P(t[1])+"",o;return{c(){e=w("a"),o=M(n),b(e,"href",t[1])},m(l,s){g(l,e,s),v(e,o)},p(l,s){s&2&&n!==(n=P(l[1])+"")&&ee(o,n),s&2&&b(e,"href",l[1])},d(l){l&&m(e)}}}function We(t){let e,n,o,l,s,r=P(t[1])+"",c;return{c(){e=w("a"),n=w("img"),s=k(),c=M(r),b(n,"alt",o="Image for "+P(t[1])),V(n.src,l=t[1])||b(n,"src",l),N(n,"max-width","80%"),b(e,"href",t[1])},m(i,u){g(i,e,u),v(e,n),v(e,s),v(e,c)},p(i,u){u&2&&o!==(o="Image for "+P(i[1]))&&b(n,"alt",o),u&2&&!V(n.src,l=i[1])&&b(n,"src",l),u&2&&r!==(r=P(i[1])+"")&&ee(c,r),u&2&&b(e,"href",i[1])},d(i){i&&m(e)}}}function Ve(t){let e,n,o;function l(c,i){return i&2&&(e=null),i&1&&(n=null),e==null&&(e=!!c[1].startsWith("http")),e?De:(n==null&&(n=!!c[0].includes('"^^<http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML>')),n?Ge:Ae)}let s=l(t,-1),r=s(t);return{c(){r.c(),o=X()},m(c,i){r.m(c,i),g(c,o,i)},p(c,[i]){s===(s=l(c,i))&&r?r.p(c,i):(r.d(1),r=s(c),r&&(r.c(),r.m(o.parentNode,o)))},i:$,o:$,d(c){r.d(c),c&&m(o)}}}function Ke(t,e,n){let o;const l=["JPG","JPEG","jpg","jpeg","webp","PNG","png"],s=c=>l.some(i=>c.trim().endsWith(i)||c.trim().endsWith(i+'"^^<sdo:URL>'));let{text:r=""}=e;return t.$$set=c=>{"text"in c&&n(0,r=c.text)},t.$$.update=()=>{t.$$.dirty&1&&n(1,o=r.startsWith('"')?r.includes('"^^')?r.substring(1,r.lastIndexOf('"^^')):r.substring(1,r.lastIndexOf('"')):r)},[r,o,s]}class J extends _e{constructor(e){super(),me(this,e,Ke,Ve,Y,{text:0})}}function fe(t,e,n){const o=t.slice();return o[2]=e[n][0],o[3]=e[n][1],o}function Ue(t){let e,n,o,l,s,r,c,i,u;const p=[Qe,Je],a=[];function d(f,h){return T?0:1}return c=d(),i=a[c]=p[c](t),{c(){e=w("main"),n=w("div"),o=w("a"),l=w("img"),r=k(),i.c(),b(l,"class","logo svelte-1m6nwqq"),b(l,"alt","Padova Grand Tour logo"),V(l.src,s=Me)||b(l,"src",s),b(o,"href",F),b(n,"class","content svelte-1m6nwqq"),b(e,"class","svelte-1m6nwqq")},m(f,h){g(f,e,h),v(e,n),v(n,o),v(o,l),v(n,r),a[c].m(n,null),u=!0},p(f,h){i.p(f,h)},i(f){u||(x(i),u=!0)},o(f){L(i),u=!1},d(f){f&&m(e),a[c].d()}}}function ze(t){let e;return{c(){e=w("div"),e.innerHTML=`<span class="loader svelte-1m6nwqq"></span> 
    <p>Connecting....</p>  
    <p>To start, run <span class="code svelte-1m6nwqq">docker compose up --force-recreate</span></p>`,b(e,"class","loading svelte-1m6nwqq")},m(n,o){g(n,e,o)},p:$,i:$,o:$,d(n){n&&m(e)}}}function Je(t){let e,n,o,l,s,r,c,i,u,p,a,d;return{c(){e=w("h1"),e.textContent="Padova Grand Tour Ontology",n=k(),o=w("p"),o.textContent="A collection of artworks, tours and cultural sites regarding the italian city of Padova.",l=k(),s=w("p"),s.innerHTML='<b>Sparql endpoint:</b><a href="http://localhost:7210/sparql">http://localhost:7210/sparql</a>',r=k(),c=w("p"),c.innerHTML='<b>Tour website:</b>  <a href="https://padovagrandtour.github.io">https://padovagrandtour.github.io</a>',i=k(),u=w("p"),u.innerHTML=`<b>Some entities:</b>  <a href="https://padovagrandtour.github.io/entities#SITE0">Cappella degli Scrovegni</a>,
          <a href="https://padovagrandtour.github.io/entities#CSCategoryMuseum">Museum category</a>,
          <a href="https://padovagrandtour.github.io/entities#ARTWORKsq991">Old plate</a>`,p=k(),a=w("img"),b(a,"class","visual svelte-1m6nwqq"),b(a,"alt","Padova Grand Tour Visual Ontology Schema"),V(a.src,d=Ie)||b(a,"src",d)},m(f,h){g(f,e,h),g(f,n,h),g(f,o,h),g(f,l,h),g(f,s,h),g(f,r,h),g(f,c,h),g(f,i,h),g(f,u,h),g(f,p,h),g(f,a,h)},p:$,i:$,o:$,d(f){f&&m(e),f&&m(n),f&&m(o),f&&m(l),f&&m(s),f&&m(r),f&&m(c),f&&m(i),f&&m(u),f&&m(p),f&&m(a)}}}function Qe(t){let e,n,o,l,s,r,c,i=F+T+"",u,p,a,d,f,h;const C=[Ye,Ze],_=[];function q(y,E){return y[0].length==0?0:1}return a=q(t),d=_[a]=C[a](t),{c(){e=w("h1"),n=w("a"),o=M("pgt:"),l=M(T),s=k(),r=w("p"),c=w("a"),u=M(i),p=k(),d.c(),f=X(),b(n,"href",F+T),b(c,"href",F+T)},m(y,E){g(y,e,E),v(e,n),v(n,o),v(n,l),g(y,s,E),g(y,r,E),v(r,c),v(c,u),g(y,p,E),_[a].m(y,E),g(y,f,E),h=!0},p(y,E){let K=a;a=q(y),a===K?_[a].p(y,E):(ne(),L(_[K],1,1,()=>{_[K]=null}),oe(),d=_[a],d?d.p(y,E):(d=_[a]=C[a](y),d.c()),x(d,1),d.m(f.parentNode,f))},i(y){h||(x(d),h=!0)},o(y){L(d),h=!1},d(y){y&&m(e),y&&m(s),y&&m(r),y&&m(p),_[a].d(y),y&&m(f)}}}function Ze(t){let e,n,o,l,s=t[0],r=[];for(let i=0;i<s.length;i+=1)r[i]=ae(fe(t,s,i));const c=i=>L(r[i],1,1,()=>{r[i]=null});return{c(){e=w("table"),n=w("tr"),n.innerHTML=`<th class="tsmall svelte-1m6nwqq">s</th> 
              <th class="tsmall svelte-1m6nwqq">p</th> 
              <th class="svelte-1m6nwqq">o</th>`,o=k();for(let i=0;i<r.length;i+=1)r[i].c();b(n,"class","svelte-1m6nwqq"),b(e,"class","svelte-1m6nwqq")},m(i,u){g(i,e,u),v(e,n),v(e,o);for(let p=0;p<r.length;p+=1)r[p].m(e,null);l=!0},p(i,u){if(u&1){s=i[0];let p;for(p=0;p<s.length;p+=1){const a=fe(i,s,p);r[p]?(r[p].p(a,u),x(r[p],1)):(r[p]=ae(a),r[p].c(),x(r[p],1),r[p].m(e,null))}for(ne(),p=s.length;p<r.length;p+=1)c(p);oe()}},i(i){if(!l){for(let u=0;u<s.length;u+=1)x(r[u]);l=!0}},o(i){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)L(r[u]);l=!1},d(i){i&&m(e),$e(r,i)}}}function Ye(t){let e,n,o;return{c(){e=w("p"),e.textContent="No triples found for this entity :(",n=k(),o=w("p"),o.textContent="Did you spell it right?"},m(l,s){g(l,e,s),g(l,n,s),g(l,o,s)},p:$,i:$,o:$,d(l){l&&m(e),l&&m(n),l&&m(o)}}}function ae(t){let e,n,o,l,s,r,c,i,u,p,a;return o=new J({props:{text:F+T}}),r=new J({props:{text:t[2]}}),u=new J({props:{text:t[3]}}),{c(){e=w("tr"),n=w("td"),z(o.$$.fragment),l=k(),s=w("td"),z(r.$$.fragment),c=k(),i=w("td"),z(u.$$.fragment),p=k(),b(n,"class","tsmall svelte-1m6nwqq"),b(s,"class","tsmall svelte-1m6nwqq"),b(i,"class","svelte-1m6nwqq"),b(e,"class","svelte-1m6nwqq")},m(d,f){g(d,e,f),v(e,n),B(o,n,null),v(e,l),v(e,s),B(r,s,null),v(e,c),v(e,i),B(u,i,null),v(e,p),a=!0},p(d,f){const h={};f&1&&(h.text=d[2]),r.$set(h);const C={};f&1&&(C.text=d[3]),u.$set(C)},i(d){a||(x(o.$$.fragment,d),x(r.$$.fragment,d),x(u.$$.fragment,d),a=!0)},o(d){L(o.$$.fragment,d),L(r.$$.fragment,d),L(u.$$.fragment,d),a=!1},d(d){d&&m(e),W(o),W(r),W(u)}}}function et(t){let e,n,o,l,s,r,c,i,u,p,a,d;const f=[ze,Ue],h=[];function C(_,q){return!_[0]&&T?0:1}return c=C(t),i=h[c]=f[c](t),{c(){e=w("a"),e.innerHTML='<svg width="80" height="80" viewBox="0 0 250 250" style="fill:var(--color); color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg>',n=k(),o=w("style"),o.textContent=".github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}",l=k(),s=w("button"),s.textContent=`${re?"Switch to GraphDB mode":"Switch to HDT mode"}`,r=k(),i.c(),u=X(),b(e,"href","https://github.com/padovagrandtour/padovagrandtour"),b(e,"target","_blank"),b(e,"rel","noreferrer"),b(e,"class","github-corner"),b(e,"aria-label","PadovaGrandTour github repository"),N(s,"position","fixed"),N(s,"bottom","20px"),N(s,"right","20px"),N(s,"height","40px")},m(_,q){g(_,e,q),g(_,n,q),v(document.head,o),g(_,l,q),g(_,s,q),g(_,r,q),h[c].m(_,q),g(_,u,q),p=!0,a||(d=qe(s,"click",t[1]),a=!0)},p(_,[q]){let y=c;c=C(_),c===y?h[c].p(_,q):(ne(),L(h[y],1,1,()=>{h[y]=null}),oe(),i=h[c],i?i.p(_,q):(i=h[c]=f[c](_),i.c()),x(i,1),i.m(u.parentNode,u))},i(_){p||(x(i),p=!0)},o(_){L(i),p=!1},d(_){_&&m(e),_&&m(n),m(o),_&&m(l),_&&m(s),_&&m(r),h[c].d(_),_&&m(u),a=!1,d()}}}const F="https://padovagrandtour.github.io/entities#";function tt(t,e,n){let o;return ve(t,ge,s=>n(0,o=s)),[o,()=>{localStorage["padovagrandtour-hdtmode"]=re?"false":"true",location.reload()}]}class nt extends _e{constructor(e){super(),me(this,e,tt,et,Y,{})}}new nt({target:document.getElementById("app")});
